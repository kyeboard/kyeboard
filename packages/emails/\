<script setup lang="ts">
import { ref , inject } from "vue";
import Surreal from "surrealdb.js";
import type { Notyf } from "notyf";

const username = ref<string>("");
const password = ref<string>("");
const db = new Surreal("http://127.0.0.1:8000/rpc");
const notyf = inject("notyf") as Notyf;

const authenticate = async () => {
    try {         
        await db.signin({
            user: username.value,
            pass: password.value,
        });

        notyf.success("Successfully logged in! Redirecting...")
    } catch(err) {
        notyf.error("Invalid username or password!")
    }
};
</script>

<template>
    <div
        class="w-screen h-screen bg-base flex items-center justify-center flex-col text-text"
    >
        <div class="text-4xl font-extrabold">Welcome to Admin Panel!</div>
        <div class="font-extrabold text-overlay1">Well there is only one user</div>
        <span class="font-bold text-left w-1/2 mt-6">Username</span>
        <input
            class="bg-surface0/40 p-4 w-1/2 mt-2 rounded-xl px-6 placeholder-overlay1 font-semibold"
            v-model="username"
            placeholder="Enter your database username..."
        />
        <span class="font-bold text-left w-1/2 mt-6">Password</span>
        <input
            class="bg-surface0/40 p-4 w-1/2 mt-2 rounded-xl px-6 placeholder-overlay1 font-semibold"
            v-model="password"
            placeholder="Enter your database password..."
        />
        <button
            class="bg-gradient-to-r from-[#eecda3] to-[#ef629f] w-1/2 rounded-xl mt-4 text-base font-bold p-4"
            @click="authenticate()"
        >
            Authenticate
        </button>
    </div>
</template>
